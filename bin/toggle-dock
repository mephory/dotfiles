#!/bin/sh

# TODO:
#   - spawn for every available screen
#   - set width from resolution on screen

PID=$(xdotool search --name dzen2-dock getwindowpid %@)

if [[ -z $PID ]]; then
    touch /tmp/.workspace-info
    ((cat /tmp/.workspace-info; while true; do inotifywait -qq -e close_write /tmp/.workspace-info; cat /tmp/.workspace-info; done | dzen2 -p -x 0 -w 1920 -bg '#002b36' -xs 1 -ta l -dock -title-name dzen2-dock -fn xft:monaco:pixelsize=12 -e '') &)
    ((cat /tmp/.workspace-info; while true; do inotifywait -qq -e close_write /tmp/.workspace-info; cat /tmp/.workspace-info; done | dzen2 -p -x 0 -w 1920 -bg '#002b36' -xs 2 -ta l -dock -title-name dzen2-dock -fn xft:monaco:pixelsize=12 -e '') &)
else
    kill $PID
fi
